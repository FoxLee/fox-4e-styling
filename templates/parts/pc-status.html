<h2 class="name">{{localize 'Status'}}</h2>

<div class="flexrow responsive two-up">
	<div class="column">
	
		<section class="progression">
			<span class="exp">
				<label class="xp" for="system.details.exp" data-tooltip="{{localize 'Fox4e.TipEnterNum'}} {{localize 'DND4E.Exp'}}">{{localize 'DND4E.Exp'}}</label>&thinsp;{{!--
				--}}<input id="pc_xp_input" type="text" class="number" name="system.details.exp" value="{{system.details.exp}}" data-dtype="Number" onClick="this.select();" />
			</span>{{!--
				--}} {{!--
			--}}<span class="milestones">({{!--
				--}}<label class="label" for="system.magicItemUse.milestone">{{localize 'DND4E.MilestonePlural'}}</label>&thinsp;{{!--
				--}}<input id="system.magicItemUse.milestone" type="text"  class="number" name="system.magicItemUse.milestone" value="{{system.magicItemUse.milestone}}" data-tooltip="{{localize 'DND4E.MilestonePlural'}}" placeholder="0" data-dtype="Number" onClick="this.select();" />)
			</span>
		</section>

		{{!-- Modifiers --}}
		{{#if system.modifiers}}
		<section class="modifiers global infobox">
			<h3 class="">{{localize 'DND4E.ModifiersGlobal'}}</h3>
			<ul class="modifier-list">
				<div class="global-mods-column flexrow responsive two-up">
					<li class="column flexrow global-mod" data-modifiers="attack">
						<span class="modifier flexrow" data-tooltip="{{localize 'DND4E.ModifierAttack'}} <br />{{#if system.modifiers.attack?.warn}}({{localize 'DND4E.ModifierAttackNote'}}){{/if}}">
							<strong>{{localize 'DND4E.Attack'}}</strong>
							<span class="modifiers-value">{{numberFormat system.modifiers.attack.value sign=true}}</span>
						</span>
						<a class="modifiers-bonus" data-target="system.modifiers"
							data-tooltip="{{localize 'DND4E.BonusesTo'}} {{localize 'DND4E.ModifierAttack'}}">({{localize
							'DND4E.Bonus'}}&nbsp;{{numberFormat system.modifiers.attack.bonusValue sign=true}})</a>
					</li>
					<li class="flexrow global-mod" data-modifiers="damage">
						<span class="modifier flexrow" data-tooltip="{{localize 'DND4E.ModifierDamage'}}">
							<strong>{{localize 'DND4E.Damage'}}</strong>
							<span class="modifiers-value">{{numberFormat system.modifiers.damage.value sign=true}}</span>
						</span>
						<a class="modifiers-bonus" data-target="system.modifiers"
							data-tooltip="{{localize 'DND4E.BonusesTo'}} {{localize 'DND4E.ModifierDamage'}}">({{localize
							'DND4E.Bonus'}}&nbsp;{{numberFormat system.modifiers.damage.bonusValue sign=true}})</a>
					</li>
				</div>
				<div class="global-mods-column flexrow responsive two-up">
					<li class="column flexrow global-mod" data-modifiers="skills">
						<span class="modifier flexrow" data-tooltip="{{localize 'DND4E.ModifierSkills'}}">
							<strong>{{localize 'DND4E.Skills'}}</strong>
							<span class="modifiers-value">{{numberFormat system.modifiers.skills.value sign=true}}</span>
						</span>
						<a class="modifiers-bonus" data-target="system.modifiers"
							data-tooltip="{{localize 'DND4E.BonusesTo'}} {{localize 'DND4E.ModifierSkills'}}">({{localize
							'DND4E.Bonus'}}&nbsp;{{numberFormat system.modifiers.skills.bonusValue sign=true}})</a>
					</li>
					<li class="flexrow global-mod" data-modifiers="defences">
						<span class="modifier flexrow" data-tooltip="{{localize 'DND4E.ModifierDefences'}}">
							<strong>{{localize 'DND4E.Defences'}}</strong>
							<span class="modifiers-value">{{numberFormat system.modifiers.defences.value sign=true}}</span>
						</span>
						<a class="modifiers-bonus" data-target="system.modifiers"
							data-tooltip="{{localize 'DND4E.BonusesTo'}} {{localize 'DND4E.ModifierDefences'}}">({{localize
							'DND4E.Bonus'}}&nbsp;{{numberFormat system.modifiers.defences.bonusValue sign=true}})</a>
					</li>
				</div>
			</ul>
		</section>
		{{/if}}<!--- End Global Modfiers --->
	
		{{!-- Encounter Resources --}}
		<section class="standard-resources">
			<h3 class="name">{{localize 'Fox4e.ResourcesUniversal'}}</h3>
			
			<table class="resources">
				<thead>
					<tr>
						<th>Resource</th>
						<th>Used</th>
					</tr>
				</thead>

				<tbody>
					<tr class="action">{{!-- Action Points --}}
						<td class="action-point-extra rollable left" for="system.actionpoints.value" data-tooltip="{{localize 'Fox4e.TipClickConfig'}} {{localize 'DND4E.ActionPointRiders'}}">
							{{localize 'DND4E.ActionPoints'}}
						</td>
						<td class="used">
							<input type="checkbox" type="checkbox" name="system.actionpoints.encounteruse" id="system.actionpoints.encounteruse" data-dtype="Boolean" {{checked system.actionpoints.encounteruse}} data-tooltip="Action Point used this encounter?" />
						</td>
					</tr>

					<tr class="secwind">
						<td class="secondwind-bonus rollable right" data-tooltip="{{localize 'Fox4e.TipClickConfig'}} {{localize 'DND4E.SecondWindBonus'}}">
							{{localize 'DND4E.SecondWind'}}
						</td>
						<td class="used">
							<input type="checkbox" name="system.details.secondwind" id="system.details.secondwind" data-dtype="Boolean" {{checked system.details.secondwind}} data-tooltip="{{localize 'DND4E.SecondWindUsed'}}" />
						</td>
					</tr>
					
					<tr class="daily-item-power-use">
						<td class="daily-item-power-use-counter">
							<span data-tooltip="{{localize 'DND4E.ItemUseDaily'}}">{{localize 'Fox4e.ItemDailies'}}</span> 
							<input type="text" name="system.magicItemUse.dailyuse" value="{{system.magicItemUse.dailyuse}}" data-tooltip="{{localize 'DND4E.ItemUseDailyRem'}}" placeholder="0" data-dtype="Number" onClick="this.select();"/> 
							<span data-tooltip="{{localize 'DND4E.ItemUseDaily'}}">/ {{system.magicItemUse.perDay}}</span>
						</td>
						<td class="used">
							<input class="daily-item-power-use-check" type="checkbox" name="system.magicItemUse.encounteruse" data-dtype="Boolean" {{checked system.magicItemUse.encounteruse}} data-tooltip="{{localize 'DND4E.ItemUseDailyEnc'}}" />
						</td>		
					</div>
					
				</tbody>
			</table>
		</section>

		<section class="custom-resources">
			<h3 class="name">{{localize 'Fox4e.ResourcesCustom'}}</h3>
			{{!-- Custom Resources --}}
			<div class="flexrow">
				{{#each system.resources as |res|}}
				<div class="resource infobox">
					<h4 class="resource-name">
						<input name="system.resources.{{res.name}}.label" type="text" value="{{res.label}}"
							   placeholder="{{res.placeholder}}" />
					</h4>
					<div class="resource-tracker flexrow">
						<input class="resource-value" name="system.resources.{{res.name}}.value" type="number" value="{{res.value}}" placeholder="0"/>
						<span class="sep"> / </span>
						<input class="resource-max" name="system.resources.{{res.name}}.max" type="number" value="{{res.max}}" placeholder="0"/>
					</div>
					<div class="resource-recharge flexrow">
						<span class="label">{{localize 'DND4E.PowerRecharge'}}</span>
						<div class="recharge checkbox flexrow">
							<label for="system.resources.{{res.name}}.sr" data-tooltip="{{localize 'DND4E.RestShort'}}">{{localize 'DND4E.AbbreviationSR'}}</label>
							<input name="system.resources.{{res.name}}.sr" type="checkbox" {{checked res.sr}} data-tooltip="{{localize 'DND4E.RestShort'}}" />
						</div>
						<div class="recharge checkbox flexrow">
							<label for="system.resources.{{res.name}}.lr" data-tooltip="{{localize 'DND4E.RestLong'}}">{{localize 'DND4E.AbbreviationLR'}}</label>
							<input name="system.resources.{{res.name}}.lr" type="checkbox" {{checked res.lr}} data-tooltip="{{localize 'DND4E.RestLong'}}" />
						</div>
					</div>
					
					<div class="resource-show checkbox flexrow">
						<label class="label" data-tooltip="{{localize 'Fox4e.TipShowSummary'}}">{{localize 'Fox4e.InSummary'}}</label> <input name="system.resources.{{res.name}}.show" type="checkbox" {{checked res.show}} data-tooltip="{{localize 'Fox4e.TipShowSummary'}}" />
					</div>
				</div>
				{{/each}}
			</div>
		</section>

	</div>
	<div class="column">
		{{#if system.resistances}}

		{{!-- Damage Resistances --}}
		<h3>{{localize 'DND4E.DamResVuln'}}</h3>
		<table class="resistances">
			<thead>
				<tr>
					<th class="res-name">Damage Type</th>
					<th class="res-mod">Value</th>
					<th class="res-armour">{{localize 'DND4E.Armour'}}</th>
					<th class="res-bonus">{{localize 'DND4E.Bonus'}}</th>
					<th class="res-immune">{{localize 'Fox4e.Immune'}}</th>
				</tr>
			</thead>
			<tbody>
				{{#each system.resistances as |res r|}}
				<tr class="res" data-res="{{r}}">
					<td class="res-name">{{res.label}}</td>
					<td class="res-mod">{{numberFormat res.value decimals=0 sign=true}}</td>
					<td class="res-armour">{{res.armour}}</td>
					<td class="res-bonus resistances-bonus" data-target="system.resistances" data-tooltip="{{localize 'DND4E.BonusesTo'}} {{localize 'DND4E.DamRes'}}">{{res.resBonusValue}}</td>
					<td class="res-immune"><input type="checkbox" name="system.resistances.{{r}}.immune" data-dtype="Boolean" {{checked res.immune}} data-tooltip="{{localize 'DND4E.Immunity'}}" /></td>
					
				</tr>
				{{/each}}
			</tbody>
		</table>

		{{!-- Condition & Special Resistances --}}
		<div class="resistances-special infobox">
			<h3>{{ localize "DND4E.Special" }}</h3>

			<div>
				<a class="list-string-input untyped-resistances" data-options="special" data-target="system.untypedResistances.resistances">
					<span class="h4">{{ localize "DND4E.UntypedRes" }}</span>
					<i class="fas fa-edit"></i>
				</a>

				{{#if (laden system.untypedResistances.resistances)}}
					<ul class="traits-list">
						{{#each system.untypedResistances.resistances as |v k|}}
						<li class="tag {{k}}">{{v}}</li>
						{{/each}}
					</ul>
				{{/if}}
			</div>

			<div>
				<a class="list-string-input untyped-resistances" data-options="special" data-target="system.untypedResistances.vulnerabilities">
					<span class="h4">{{ localize "DND4E.UntypedVuln" }}</span>
					<i class="fas fa-edit"></i>
				</a>
				
				{{#if (laden system.untypedResistances.vulnerabilities)}}
					<ul class="traits-list">
						{{#each system.untypedResistances.vulnerabilities as |v k|}}
						<li class="tag {{k}}">{{v}}</li>
						{{/each}}
					</ul>
				{{/if}}
			</div>

			<div>
				<a class="list-string-input untyped-resistances" data-options="special" data-target="system.untypedResistances.immunities">
					<span class="h4">{{ localize "DND4E.UntypedImm" }}</span>
					<i class="fas fa-edit"></i>
				</a>

				{{#if (laden system.untypedResistances.immunities)}}
					<ul class="traits-list">
						{{#each system.untypedResistances.immunities as |v k|}}
						<li class="tag {{k}}">{{v}}</li>
						{{/each}}
					</ul>
				{{/if}}
			</div>
		</div>

		{{/if}}
		
	</div>
</div>